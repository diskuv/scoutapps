; Recommendation: Place this file in source control.
; Auto-generated by CMake from a DkSDKProject_AddPackage() statement.
; Edit your CMakeLists.txt files, not this.

; Any .mld in the current directory will become part of the documentation.
; The index.mld, if any, will be the package entry documentation page.
; See https://dune.readthedocs.io/en/stable/documentation.html for more details.
(documentation (package SonicScout_Objs))

; Can place .ml files not only in a directory as siblings to the `dune` file, but can
; also place .ml files in the `dune` subdirectories.

(include_subdirs unqualified)

; This is a private library visible only to code in the [SonicScout_Objs] package.
; It is not "wrapped" so you can freely move source code between private libraries within
; [SonicScout_Objs] without refactoring your source code.

(library
 (flags
  (:standard -warn-error -A))
 ; -dllib -lSquirrelScout_Objs-shared: record the .dll (or .so)
 ;     in SquirrelScout_Objs.cma so that when ocamlrun (ex. a toplevel)
 ;     runs bytecode, the named shared library can be loaded
 ;     from the lib/stublibs/ folder.
 ;     Not needed for DkSDK CMake.
 ;     For non-DkSDK builds, the .dll or .so
 ;     must be placed in the stublibs directory;
 ;     confer
 ;     https://gitlab.com/diskuv/registries/public-opam-pkgs/-/blob/main/README.md.
 ;     The SquirrelScout_Objs.opam file is responsible for the installation.
 (ocamlc_flags (:standard -dllib -lSquirrelScout_Objs-shared))
 ; -S: keep camlasm*.asm/camlasm*.S intermediate assembly
 ;     source code available for IDE debugging
 (ocamlopt_flags
  (:standard -S))
 (name SquirrelScout_Objs)
 (package SonicScout_Objs)
 (wrapped false)
 (libraries
  SquirrelScout_Std
  DkSDKFFI_OCaml)
 (modules ObjsEntry DkCoder_Std))

(rule
 (alias build-byte-SquirrelScout_Objs)
 (deps SquirrelScout_Objs.cma)
 (targets )
 (action (echo "Built SquirrelScout_Objs.cma and bytecode dependencies
")))

(rule
 (alias build-native-SquirrelScout_Objs)
 (deps SquirrelScout_Objs.cmxa)
 (targets )
 (action (echo "Built SquirrelScout_Objs.cmxa and nativecode dependencies
")))
